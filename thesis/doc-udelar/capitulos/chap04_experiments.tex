\chapter{Experimentos computacionales}
\label{sect:problemresults}

En este capítulo ponemos a prueba el modelo resultante del Capítulo \ref{sect:problemresolution}. Para empezar estudiamos el comportamiento del modelo frente a perturbaciones en algunos de los parámetros específicos del problema, a saber, modelado de la transferencia de demanda, presupuesto y tecnologías de ciclovías. Estas pruebas se realizan sobre la red de Sioux-Falls de manera de poder realizar pruebas en tiempo razonable. En particular, analizamos los resultados respecto a la demanda transferida total y a las decisiones que se toman sobre las ciclovías a construir. Luego aplicamos el modelo a una instancia de tamaño realista que modela la ciudad de Montevideo. Antes de presentar los resultados, discutimos el criterio con el que elegimos los valores de costos de construcción de las diferentes tecnologías de ciclovía, costos de usuario por tecnología, funciones de transferencia de demanda y valores de presupuesto.

\section{Especificación de datos}
\label{sect:dataspecification}

Nuestro problema requiere la disponibilidad de parámetros que en la práctica no son fáciles de estimar de forma realista como los costos de usuario y construcción por tipo de tecnología y transferencia de demanda en función del costo de usuario. En esta sección y en la siguiente (\ref{sect:fspecification}) definimos algunos criterios que utilizamos para especificarlos basándonos en trabajos de la literatura. Luego, en la Sección \ref{sect:sensibilityanalysis} analizamos qué efectos tienen las perturbaciones sobre las soluciones.

La cantidad y tipos de tecnologías de ciclovía varían de un contexto a otro tanto en su disponibilidad como en sus costos y, por lo tanto, es difícil estimar estos últimos de manera general sin llegar a un análisis caso a caso. Por ejemplo, en la ciudad de Montevideo podemos encontrar tres tipos \footnote{Mapa interactivo: \url{https://montevideo.gub.uy/mapa-montevideo-en-bici}}: el más sencillo consiste en imponer un límite superior de velocidad para los vehículos automotores (30 km/h) y cartelería resaltando cierta calle o zona como habilitada para el tránsito en bicicleta. Un segundo tipo consiste en utilizar una fracción de la calle como senda específica para bicicletas que puede ir en uno o ambos sentidos. Y el tercer tipo consta de una bicisenda separada del tráfico motorizado con pavimento específico para circular en bicicleta.

Los costos de construcción por unidad de distancia pueden variar según la ubicación y tipo de ciclovía, congestión del área de la ciudad y su afectación por las obras, precios de insumos externos como el petróleo y cuestiones logísticas como reubicación de paradas de ómnibus y señales de tránsito, entre otros aspectos. Se puede encontrar información al respecto en el análisis del \textcite{typicalcostsofcylcing} que presenta diversos tipos de tecnologías y los principales factores que afectan el costo de construcción, como trabajo dentro de un programa de incentivo del transporte en bicicleta en Inglaterra. Basándonos en dicho trabajo simplificamos y generalizamos el cálculo de los costos de construcción para cada tipo de tecnologías de la siguiente manera: la tecnología de tipo $i + 1$ cuesta el doble que la tecnología de tipo $i$. Esto también es consistente con la información disponible para la ciudad de Montevideo\footnote{Información obtenida por comunicación personal de uno de los Directores de Tesis con la Intendencia de Montevideo.}. Entonces, sean $l_a$ el largo del arco $a \in A$ y $CC_i$ el costo de construcción de la tecnología $i \in I$ por unidad de distancia, entonces los costos de construcción por tecnología y arco quedan: $H_{ai} = l_a \times CC_i, \forall a \in A, i \in I$; donde $CC_i = 2 \times CC_{i-1}, \forall i > 2$; $CC_1 = 1$ y $CC_0 = 0$.

Por otro lado, los costos de usuario de atravesar un arco varían en la práctica dependiendo de factores como ancho de la vía, pavimento, volumen y velocidad del tránsito, entre otros, que a su vez se ponderan por el largo del arco. En \textcite{blos2007} podemos encontrar el concepto de {\it Bicycle Level of Service} (BLOS), muy utilizado en la literatura \parencite{Zhu2019, Liu2019}, que agrupa estas consideraciones bajo un único valor. Para el cálculo del BLOS se tienen en cuenta los distintos aspectos que cuantificados en indicadores, son luego utilizados en una fórmula para calcular el puntaje de BLOS que se estratifican en 6 niveles del A al F.

Los aspectos que se consideran son los siguientes:

\begin{enumerate}
  \item{Presencia de ciclovía, porcentaje de la vía ocupada por estacionamiento}
  \item{Límite de velocidad de vehículos motorizados}
  \item{Volumen promedio de los vehículos motorizados}
  \item{Porcentaje de tránsito pesado (camiones)}
  \item{Condición del pavimento}
\end{enumerate}

\begin{table}[h!]
  \centering
    \begin{tabular}{cccS}
    \toprule
      Nivel & Puntaje BLOS & Tecnología & \shortstack{Proporción de mejora \\ sobre costo base} \\
    \midrule
      A     & $\leq 1.5$   & 5 & 0,40  \\
      B     & 1,5-2,5      & 4 & 0,52  \\
      C     & 2,5-3,5      & 3 & 0,64  \\
      D     & 3,5-4,5      & 2 & 0,76  \\
      E     & 4,5-5,5      & 1 & 0,88  \\
      F     & $> 5.5$       & 0 & 1     \\
    \bottomrule
  \end{tabular}
  \caption{Niveles de servicio definidos en el BLOS, menor puntaje BLOS representa mejores condiciones para el usuario. Para cada nivel definimos un tipo de tecnología y su correspondiente proporción de mejora sobre la tecnología base.}\label{table:blosscores}
\end{table}

En esta tesis nos enfocamos en la planificación estratégica de una red ciclovías sin asumir aspectos detallados para su diseño físico, por lo tango ignoramos algunos factores tomados en cuenta para el cálculo del BLOS. Mediante la construcción de infraestructura de ciclovía solo podemos mejorar alguno de los siguientes aspectos: límite de velocidad de vehículos motorizados, presencia de ciclovías y condiciones del pavimento.

Tomando como base el puntaje de BLOS estratificado de la Tabla \ref{table:blosscores}, siguiendo el cálculo en \textcite{baya2021}, podemos traducir de forma aproximada los puntajes de BLOS a proporción de mejora sobre la tecnología base o red de calles utilizando la función $C(i) = {28 - 3 (i + 1) \over 25}$ donde $i \in I = \{0,1,2,\ldots\}$ es el tipo de tecnología. Suponiendo que el nivel F de la escala de BLOS corresponde a tecnología base (o tecnología 0), la proporción de mejora de las tecnologías A-E correspondientes a los tipos de tecnologías 5,4,3,2 y 1 respectivamente se pueden observar en la misma tabla. De esta forma, la percepción del costo de atravesar un arco por parte de un usuario, puede reducirse hasta a un 40\% del valor original sobre el arco sin ciclovía (calle normal, nivel F) cuando se construye infraestructura con la mejor tecnología posible (nivel A). Utilizamos el largo del arco $l_a$ como costo de usuario base, entonces tenemos que para cada arco $a \in A$ y tecnología $i \in I$, el costo de usuario de utilizarla es $C_{ai} = C(i) \times l_a$.

Incurrimos en la simplificación de considerar, al definir una instancia, la cantidad $T$ de tipos tecnologías posibles a utilizar y no cuáles, de manera que los tipos de tecnología utilizables sean $I = \{0,.., T - 1\}$. Dada una instancia del problema, llamamos $m$ a la proporción de mejora máxima que puede dar la mejor tecnología de entre las disponibles, es decir $m = C(T - 1)$. El valor $m$ es de utilidad al definir las funciones de transferencia de demanda como veremos a continuación.

Respecto al comportamiento de los usuarios, suponemos que la demanda de todos los pares origen-destino se comporta de igual manera, lo cual tiene sentido al considerar una población determinada. Esto reduce la necesidad de especificar $|OD|$ funciones de transferencias de demanda a una sola. Es decir, para cada par origen destino $k$, tenemos que $f_k(w_k) = f({w_k \over W_k})d_k$, donde $d_k$ es la demanda máxima que se puede transferir, $W_k$ es el costo del camino más corto sobre la tecnología base y $f: [m, 1] \rightarrow [0, 1]$ modela la proporción de demanda transferida en función de la proporción del nuevo costo sobre el costo base $W_k$.

Partimos de \textcite{shwe2014} en el que analizando una extensiva encuesta realizada en varios países aproxima la proporción de viajes hechos en bicicleta y el largo de infraestructura de ciclovía per cápita en la ciudad a una relación lineal. Tomando este resultado, utilizamos una función lineal decreciente como función de transferencia de referencia. Como alternativa, en \textcite{ortuz2011} se menciona que el comportamiento de la demanda al momento de decidir entre dos modos se comporta como una función con forma de S, logística o sigmoide, por lo que también consideramos una función logística en nuestras pruebas. Por completitud analizamos otras funciones que podrían considerarse razonables: una con concavidad estrictamente positiva y otra con concavidad estrictamente negativa en el intervalo $[m, 1]$. La definición explícita se encuentra en la Sección \ref{sect:fspecification}.

Establecer valores de presupuesto realistas depende altamente de las condiciones políticas y económicas de cada localidad. Podemos encontrar en \textcite{rios2015} y \textcite{shwe2014} que factores de cubrimiento de la red de ciclovías en una ciudad de entre 10\% y 40\% del total de la red de calles de una ciudad están dentro de los parámetros normales. Seguimos este enfoque y especificamos el presupuesto como porcentaje del costo total de construir ciclovías en toda la red tomando como referencia el costo de la tecnología 1, es decir la tecnología especializada más básica que sigue a la red de calles. Dado nuestro método para el cálculo de los costos de los tipos de tecnologías, esto implica que un presupuesto del 40\% es suficientemente para cubrir 20\% solo con la tecnología de tipo 2, 10\% solo con la tecnología de tipo 3; y en general un factor de $F\%$ cubre ${F \over {2^{i - 1}}}\%$ de la tecnología $i \in \{1,..,5\}$.

Finalmente, usamos el largo de los arcos como costo de usuario y costo de construcción de la tecnología 1. Esto nos da una medida suficientemente simple y general como para usar en cualquier instancia. Notar que de la forma en que hemos modelado los costos de usuario y construcción, nos interesan las diferencias relativas entre los valores de las diferentes tecnologías más que los valores absolutos.

\section{Especificación de funciones de transferencia de demanda}
\label{sect:fspecification}

Las funciones de transferencia de demanda probadas fueron cuatro, ver Figura \ref{fig:fcatalog}. Si bien las funciones fueron propuestas por el autor de este trabajo, las versiones lineal y logística están basadas y son consistentes con los trabajos de \textcite{shwe2014} y \textcite{ortuz2011} respectivamente. Las versiones con concavidad negativa y positiva fueron creadas para complementar el estudio y están compuestas de funciones logísticas desplazadas de manera de lograr la concavidad deseada en el intervalo $[m, 1]$.

Las expresamos parametrizadas por $m$, correspondiente a la proporción de mejora máxima alcanzable por la mejor tecnología, ya que es el mínimo valor que tiene sentido. Definimos las funciones en $[m, 1] \rightarrow [0, 1]$ de la siguiente manera:

\begin{definition}
  Función lineal
  \begin{align}
      f(x) = {x -1 \over m - 1}
  \end{align}
\end{definition}

\begin{definition}
  Función logística
  \begin{align}
      f(x) = {1 \over 1 + e^{2k_m(x - ({1 + m \over 2}))}}
  \end{align}
\end{definition}

\begin{definition}
  Función con concavidad negativa.
  \begin{align}
      f(x) = {2 \over 1 + e^{k_m(x - 1)}} - 1
  \end{align}
\end{definition}

\begin{definition}
  Función con concavidad positiva.
  \begin{align}
      f(x) = {2 \over 1 + e^{k_m(x - m)}}
  \end{align}
\end{definition}

El parámetro $k_m$ determina la pendiente de las funciones basadas en la función logística y es utilizado para que los valores funcionales en los extremos de $(m, 1)$ estén cerca de $1$ y $0$ respectivamente. Fue determinado de manera experimental y se calcula como $k_m = {3 \over 1 - m}$. En la práctica, al utilizar estas funciones es necesario normalizar el codominio de manera que abarque todo el intervalo $[0, 1]$ dado que el parámetro $k_m$ no garantiza que esto suceda.

\begin{figure}[h!]
  \centering
  \includegraphics[width=12cm]{../resources/f_catalog.png}
    \caption{Catálogo de funciones usadas para modelar la transferencia de demanda a la bicicleta. El valor de $m$ varía según la tecnología de ciclovía utilizada y equivale a la proporción mínima alcanzada por la mejor tecnología utilizada, es decir $m = min_{i \in I} \{ C(i) \}$.}
  \label{fig:fcatalog}
\end{figure}

\FloatBarrier
\section{Análisis de sensibilidad}
\label{sect:sensibilityanalysis}

Estudiamos el comportamiento del modelo frente a perturbaciones en algunos de sus parámetros. Utilizamos la red de Sioux-Falls nuevamente dado que es de un tamaño manejable para realizar todas las ejecuciones en tiempo razonable. Las perturbaciones las realizamos sobre los parámetros específicos del problema, dejando los datos de la red y matriz de demanda fijos. Estos son: puntos de quiebre, funciones de transferencia de demanda y presupuesto. Observar que los parámetros estudiados son de distinta naturaleza: mientras que los primeros dos son relativos al modelado del comportamiento de la demanda el último es una decisión exclusiva de la entidad planificadora. La matriz de demanda se toma de \textcite{Liu2019}, con 22 pares origen-destino. Los datos de la red y matriz de demanda se encuentran en el Apéndice \ref{sect:siouxfallsdata}.

\subsection{Perturbaciones}

Uno de nuestros objetivos es determinar cuáles son las perturbaciones, más allá de un incremento en el presupuesto, que resultan en mayores valores de demanda transferida total. Por un lado, la cantidad de tipos de tecnologías disponibles es determinante respecto a la mejora alcanzable en los caminos. Es de esperar que el modelo decida utilizar mejores tecnologías en los arcos con mayor flujo de demanda, tanto como el presupuesto y tipos de tecnologías disponibles lo permitan. En principio no hay razón para limitar este número a un valor distinto del mayor valor posible, es decir los 6 niveles de la escala de BLOS, a menos que el deterioro en el tiempo de ejecución lo haga necesario. Respecto a los puntos de quiebre, esperamos que una mayor granularidad aporte positivamente a nuestro objetivo, aunque, al igual que la cantidad de tipos de tecnologías, tendremos cuidado con deterioro en el desempeño computacional.

Como instancia de referencia consideramos el siguiente conjunto de parámetros:

\begin{description}
  \item[Tecnologías de ciclovía]: 5 tipos de tecnologías además de la base.
  \item[Presupuesto]: Factor de presupuesto del 40\% respecto al costo de construcción de la tecnología mas sencilla (nivel 1).
\end{description}

Las perturbaciones las realizamos sobre el conjunto de parámetros de la instancia de referencia aplicando una o dos perturbaciones por vez en lugar de ejecutar todas las posibles combinaciones de parámetros perturbados.

En primer lugar analizamos la sensibilidad respecto al factor de presupuesto. Los valores utilizados son: 10\%, 40\%, 80\%, 160\%, 320\%, 640\% y 1280\%. El objetivo es observar si se cumple la simple intuición de que siempre a mayor presupuesto se obtienen mejores resultados y cómo es el comportamiento de la demanda transferida total respecto a los incrementos de presupuesto. Junto a los factores de presupuesto analizamos el efecto del modelado de la demanda en los resultados, utilizando 5 y 20 puntos para cada presupuesto y las funciones de transferencia lineal y logística.

Luego, comparamos el resultado de aplicar diferentes funciones de transferencia de demanda y cómo cada una es afectada por el hecho de utilizar distintas cantidades de puntos de quiebre. Utilizamos 5, 20 y 50 puntos de quiebre junto a las cuatro funciones mencionadas en la sección anterior (\ref{sect:dataspecification}). Definimos los puntos de manera que sean equidistantes en el codominio, es decir, si hay N puntos, de un punto al siguiente se obtiene una mejora de aproximadamente ${1 \over N - 1}$ en la proporción de demanda transferida.

Como resultado tenemos 36 instancias cuya representación pre simplificaciones en solver CPLEX\footnote{\url{https://www.ibm.com/analytics/cplex-optimizer}} son matrices que van desde un tamaño de $12597 \times 12310$ con 562 variables binarias hasta $14487 \times 14290$ con 1552 variables binarias.

\subsection{Resultados}

Las instancias fueron ejecutadas con el solver CPLEX versión 12.8.0.0 en su configuración por defecto sobre una máquina Intel Core i9-9900K con 64GiB de RAM. Los resultados generales de las ejecuciones se encuentran en la Tabla \ref{table:sensibilityresults} donde especificamos el valor de demanda transferida total como porcentaje sobre la demanda total de viajes, es decir, $100 \times {\sum_{k \in OD} \sum_{j \in J} z_{kj} P_{kj} \over \sum_{k \in OD} d_k}$, donde $d_k$ es la demanda total del par origen-destino $k$. Los datos sobre el uso del presupuesto, que luego comentaremos, están en la Tabla \ref{table:sensibilitybudgetusage}. El porcentaje de presupuesto utilizado por infraestructura lo calculamos como $100 \times \sum_{a \in A} {y_{ai} H_{ai} \over B}$ para $i \in I,\; i > 0$.

Se puede observar que a mayor cantidad de puntos de quiebre, fijando la función de transferencia de demanda y el presupuesto, obtenemos mayor transferencia de demanda. Esto tiene sentido, ya que la función de transferencia es representada de manera más precisa. También vemos que variar la cantidad de puntos de quiebre parece hacer variar el tiempo de ejecución en algunos casos, sin poderse determinar una relación general entre la cantidad y la complejidad resultante, pero sí podemos ver que fijando los otros parámetros y aumentando la cantidad de puntos de quiebre la complejidad aumenta. Por otro lado, observamos un fuerte impacto del modelado del comportamiento de la transferencia de demanda, es decir de cuál función se utiliza, sobre la demanda transferida. Esto nos confirma que es un aspecto importante del modelado, si bien algunas de las funciones consideradas pueden ser poco realistas dado que su calibración escapa al objetivo de este trabajo. Finalmente, vemos que la demanda transferida en función de la cantidad de presupuesto, fijando cantidad de puntos de quiebre y función de transferencia de demanda, parece crecer según la curva de la Figura \ref{fig:demandtransferbybudgetlinear} con concavidad negativa, lo que implica que el beneficio marginal de aumentar el presupuesto es cada vez menor.

\begin{figure}[h!]
  \centering
  \includegraphics[width=10cm]{../resources/demand_by_budget.png}
    \caption{Porcentaje de demanda transferida total en función del presupuesto asignado para Sioux-Falls utilizando 20 puntos de quiebre y las funciones de transferencia de demanda lineal y logística. El comportamiento es similar en ambos casos y muestra que la eficiencia de aumentar el presupuesto no es siempre la misma.}
  \label{fig:demandtransferbybudgetlinear}
\end{figure}

Respecto a la utilización del presupuesto, vemos que a mayor presupuesto mayor es el porcentaje de gasto en los tipos de tecnologías más caras, lo cual es esperable dado que benefician más al usuario. Por otro lado, aumentar la cantidad de puntos de quiebre manteniendo presupuesto y función de transferencia fijos hace que el gasto en los tipos de tecnologías varíe, no necesariamente concentrando el gasto en los tipos más caros. El desglose del presupuesto utilizado por tecnología se detalla en la Tabla \ref{table:sensibilitybudgetusage} y en la Figura \ref{fig:sensibilitybudgetusage}.

\begin{sidewaystable}
  \centering
  \small
    \begin{tabular}{SSScSc}
    \toprule
      Instancia & {Factor de presupuesto (\%)} & \shortstack{Cantidad de puntos \\ de quiebre} & \shortstack{Función de \\ transferencia} & {Demanda transferida (\%)} & \shortstack{Tiempo ejecución \\ (hh:mm:ss)} \\
    \midrule
       1 & 10 & 5 & lineal & 4,65 & 00:00:02 \\
       2 & 10 & 20 & lineal & 5,81 & 00:00:11 \\
       3 & 10 & 5 & logística & 5,13 & 00:00:01 \\
       4 & 10 & 20 & logística & 6,41 & 00:00:08 \\
       5 & 40 & 5 & concavidad negativa & 32,43 & 00:00:36 \\
       6 & 40 & 20 & concavidad negativa & 36,49 & 00:07:40 \\
       7 & 40 & 50 & concavidad negativa & 37,39 & 00:07:29 \\
       8 & 40 & 5 & concavidad positiva & 15,50 & 00:00:18 \\
       9 & 40 & 20 & concavidad positiva & 17,05 & 00:09:38 \\
      10 & 40 & 50 & concavidad positiva & 18,22 & 14:07:09 \\
      11 & 40 & 5 & lineal & 18,60 & 00:00:24 \\
      12 & 40 & 20 & lineal & 21,32 & 00:06:17 \\
      13 & 40 & 50 & lineal & 22,09 & 00:31:55 \\
      14 & 40 & 5 & logística & 18,80 & 00:00:27 \\
      15 & 40 & 20 & logística & 21,37 & 00:12:35 \\
      16 & 40 & 50 & logística & 23,08 & 00:43:53 \\
      17 & 80 & 5 & lineal & 32,17 & 00:00:59 \\
      18 & 80 & 20 & lineal & 35,66 & 01:26:32 \\
      19 & 80 & 5 & logística & 35,47 & 00:00:44 \\
      20 & 80 & 20 & logística & 39,74 & 00:05:20 \\
      21 & 160 & 5 & lineal & 49,22 & 00:03:22 \\
      22 & 160 & 20 & lineal & 53,88 & 00:55:20 \\
      23 & 160 & 5 & logística & 58,97 & 00:02:36 \\
      24 & 160 & 20 & logística & 63,68 & 00:35:05 \\
      25 & 320 & 5 & lineal & 71,71 & 00:00:54 \\
      26 & 320 & 20 & lineal & 75,58 & 00:07:49 \\
      27 & 320 & 5 & logística & 80,77 & 00:01:33 \\
      28 & 320 & 20 & logística & 88,46 & 00:02:39 \\
      29 & 640 & 5 & lineal & 94,57 & 00:00:05 \\
      30 & 640 & 20 & lineal & 95,74 & 00:00:22 \\
      31 & 640 & 5 & logística & 97,44 & 00:00:02 \\
      32 & 640 & 20 & logística & 99,57 & 00:00:01 \\
      33 & 1280 & 5 & lineal & 100,00 & 00:00:01 \\
      34 & 1280 & 20 & lineal & 100,00 & 00:00:01 \\
      35 & 1280 & 5 & logística & 100,00 & 00:00:01 \\
      36 & 1280 & 20 & logística & 100,00 & 00:00:01 \\
    \bottomrule
  \end{tabular}
  \caption{Todas las instancias fueron solucionadas al óptimo en tiempos relativamente cortos, con excepción de dos instancias cuyo tiempo de ejecución fue más de una hora.} \label{table:sensibilityresults}
\end{sidewaystable}

\begin{sidewaystable}
  \centering
  \small
  \begin{tabular}{SSSSSSSS}
      \toprule
      Instancia & {Presupuesto} & {Presupuesto utilizado} & {Tecn. 1 (\%)} & {Tecn. 2 (\%)} & {Tecn. 3 (\%)} & {Tecn. 4 (\%)} & {Tecn. 5 (\%)} \\
      \midrule
      1 & 31,4 & 31 & 35,48 & 64,52 &  &  &  \\
      2 & 31,4 & 31 & 9,68 & 90,32 &  &  &  \\
      3 & 31,4 & 30 &  & 46,67 & 53,33 &  &  \\
      4 & 31,4 & 31 & 9,68 & 51,61 & 38,71 &  &  \\
      5 & 125,6 & 125 & 10,40 & 83,20 & 6,40 &  &  \\
      6 & 125,6 & 125 & 4,00 & 89,60 & 6,40 &  &  \\
      7 & 125,6 & 125 & 5,60 & 81,60 & 12,80 &  &  \\
      8 & 125,6 & 125 & 2,40 & 24,00 & 41,60 & 32,00 &  \\
      9 & 125,6 & 125 & 7,20 & 12,80 & 48,00 & 32,00 &  \\
      10 & 125,6 & 125 & 2,40 & 27,20 & 51,20 & 19,20 &  \\
      11 & 125,6 & 125 & 15,20 & 33,60 & 51,20 &  &  \\
      12 & 125,6 & 125 & 16,80 & 70,40 & 12,80 &  &  \\
      13 & 125,6 & 125 & 5,60 & 81,60 & 12,80 &  &  \\
      14 & 125,6 & 125 & 4,00 & 44,80 & 38,40 & 12,80 &  \\
      15 & 125,6 & 125 & 5,60 & 11,20 & 70,40 & 12,80 &  \\
      16 & 125,6 & 125 & 2,40 & 36,80 & 60,80 &  &  \\
      17 & 251,2 & 251 & 5,18 & 35,86 & 36,65 & 22,31 &  \\
      18 & 251,2 & 251 & 8,37 & 21,51 & 70,12 &  &  \\
      19 & 251,2 & 251 & 1,99 & 21,51 & 44,62 & 31,87 &  \\
      20 & 251,2 & 251 & 1,20 & 11,16 & 81,27 & 6,37 &  \\
      21 & 502,4 & 502 & 0,40 & 15,94 & 19,92 & 63,75 &  \\
      22 & 502,4 & 502 & 2,39 & 7,57 & 45,42 & 44,62 &  \\
      23 & 502,4 & 501 & 2,20 & 13,97 & 35,93 & 47,90 &  \\
      24 & 502,4 & 502 & 2,79 & 5,58 & 54,98 & 36,65 &  \\
      25 & 1004,8 & 1002 & 0,40 & 4,19 & 13,17 & 19,96 & 62,28 \\
      26 & 1004,8 & 1004 &  & 5,98 & 6,37 & 49,4 & 38,25 \\
      27 & 1004,8 & 1004 & 0,60 & 2,99 & 26,29 & 17,53 & 52,59 \\
      28 & 1004,8 & 1004 & 0,80 & 1,20 & 14,34 & 83,67 &  \\
      29 & 2009,6 & 2008 &  & 0,40 & 4,38 & 3,59 & 91,63 \\
      30 & 2009,6 & 2008 &  & 0,40 & 1,59 & 10,36 & 87,65 \\
      31 & 2009,6 & 2008 & 0,10 & 1,49 & 2,39 & 1,99 & 94,02 \\
      32 & 2009,6 & 2004 &  & 0,60 & 1,60 & 14,77 & 83,03 \\
      33 & 4019,2 & 2719 & 0,26 & 0,29 & 1,18 &  & 98,27 \\
      34 & 4019,2 & 3048 &  & 0,26 &  &  & 99,74 \\
      35 & 4019,2 & 2780 & 0,14 & 0,86 &  &  & 98,99 \\
      36 & 4019,2 & 2994 & 0,07 &  & 0,53 &  & 99,40 \\
      \bottomrule
  \end{tabular}
  \caption{Detalle de presupuesto utilizado por instancia por tipo de tecnología. Las columnas Presupuesto y Presupuesto Utilizado están en unidades de presupuesto. Los porcentajes se calcularon sobre el valor de presupuesto utilizado y pueden no sumar 100\% por el redondeo realizado.} \label{table:sensibilitybudgetusage}
\end{sidewaystable}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\linewidth]{../resources/budget_use_by_infra.png}
  \caption{Visualización de la distribución del uso del presupuesto para cada instancia.}
  \label{fig:sensibilitybudgetusage}
\end{figure}

\clearpage
\subsection*{Casos particulares}

Vamos a analizar en detalle algunos casos particulares y discutir cómo afecta la cantidad de puntos de quiebre a la decisión de cuales tecnologías construir. Comparamos las instancias 11, 12 y 13, que utilizan la función lineal de transferencia de demanda con 5, 20 y 50 puntos de quiebre respectivamente y un factor de presupuesto de 40\%. Más datos específicos de estas instancias se pueden apreciar en la Tabla \ref{table:sensibilityinfralengths} que muestra el largo total de cada tecnología respecto a la red de calles junto a la distribución del uso del presupuesto por tecnología y la Figura \ref{fig:sensibilityinstance11_12_13} que representa las soluciones sobre la red. Observamos que a mayor cantidad de puntos de quiebre más inteligentes son las decisiones tomadas. Por ejemplo, en la instancia 11, poco más de la mitad del acotado presupuesto se invirtió en poco cubrimiento de calles utilizando la tecnología 3 mientras que en la 12 y 13 el gasto en esta tecnología solamente fue el 12,8\%. En las instancias 12 y 13 la mayor parte del gasto se hizo en tecnología 2, que para el nivel de presupuesto y función de transferencia de demanda parece ser la más eficiente. En particular, los datos de porcentaje del largo total de las calles cubierto desglosado por tipo de tecnología nos da una idea general de la demanda afectada, al ser esta instancia altamente densa y uniforme en términos de orígenes y destinos, como se observa en la Figura \ref{fig:sioux_falls_demand}.

 \begin{table}[h!]
  \centering
  \begin{adjustbox}{width=1.2\textwidth,center=\textwidth}
    \begin{tabular}{cSSSSSSSS}
      \toprule
        \multirow{2}{*}{{Instancia}} &
        \multicolumn{2}{c}{{Tecnología 1}} &
        \multicolumn{2}{c}{{Tecnología 2}} &
        \multicolumn{2}{c}{{Tecnología 3}} &
        \multicolumn{2}{c}{{Total}} \\
        & {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} \\
      \midrule
        11 & 8,74 & 15,20 & 6,51  & 33,60 & 5,72 & 51,20 & 20,98 & 100 \\
        12 & 8,89 & 16,80 & 15,22 & 70,40 & 1,64 & 12,80 & 25,75 & 100 \\
        13 & 2,29 &  5,60 & 17,77 & 81,60 & 1,96 & 12,80 & 22,73 & 100 \\
      \bottomrule
    \end{tabular}
  \end{adjustbox}
   \caption{Porcentaje del largo total de los arcos de la red construido por cada tipo de tecnología (excluyendo la tecnología base y las no utilizadas) junto al porcentaje de presupuesto asignado para cada tecnología. Recordemos que las tres instancias disponen del mismo presupuesto. Para cada tecnología $i \in \{1, 2, 3\}$ se calcula el porcentaje del largo total como $100 \times {\sum_{a \in A} {y_{ai} l_a} \over \sum_{a \in A} l_a}$, donde $l_a$ es el largo del arco $a$.}\label{table:sensibilityinfralengths}
\end{table}

Si observamos los datos de demanda transferida y costo de camino más corto, Figura \ref{fig:sensibilitybyodpair_11_12_13}, vemos que a mayor cantidad de puntos de quiebre mayor es la cantidad de pares origen-destino afectada, aunque en general las decisiones de cuáles pares origen-destino y cuánto mejorarlos no fue muy diferente entre instancias.

\begin{figure}[h!]
  \centering
  \includegraphics[width=12cm]{../resources/sensibility_case_study_demand.png}
  \includegraphics[width=12cm]{../resources/sensibility_case_study_shortest_paths.png}
  \caption{Demanda transferida y costo del camino más corto para los pares origen-destino para los cuales hubo demanda transferida. Los pares origen-destino se numeran de acuerdo a la Tabla \ref{table:siouxfallsdemanddata} en el Apéndice \ref{sect:siouxfallsdata}. Los costos de los caminos más cortos se comparan contra el costo base, que es aquel sobre la red en la cual no hay infraestructura de ciclovía construida.}
  \label{fig:sensibilitybyodpair_11_12_13}
\end{figure}

\begin{figure}[h!]
  \centering
  \includegraphics[width=12cm]{../resources/sioux_falls_demand.png}
  \caption{Visualización de la distribución de nodos origen y destino junto a su valor de demanda representado por el tamaño de los círculos para la instancia de Sioux-Falls. A la izquierda se ubican los orígenes y a la derecha los destinos. Los tamaños de los círculos son proporcionales al valor de demanda de cada par origen-destino y no se suman por nodo.}
  \label{fig:sioux_falls_demand}
\end{figure}

\begin{figure}[h!]
  \centering
  \includegraphics[width=0.85\linewidth]{../resources/sioux_falls_0.4_budget_factor_linear_5_breakpoints.png}
  \includegraphics[width=0.85\linewidth]{../resources/sioux_falls_0.4_budget_factor_linear_20_breakpoints.png}
  \includegraphics[width=0.85\linewidth]{../resources/sioux_falls_0.4_budget_factor_linear_50_breakpoints.png}
  \caption{De arriba hacia abajo, instancias 11, 12 y 13. A la izquierda se muestran las ubicaciones de cada tipo de tecnología. A la derecha los flujos para cada arco considerando el acumulado de demanda de cada par origen-destino que pasaría sobre ellos. Los flujos no se agregan entre dos arcos sentido opuesto, en dicho caso solo se visualiza el mayor de los flujos.}
  \label{fig:sensibilityinstance11_12_13}
\end{figure}

\clearpage
Concluimos de este análisis que el modelado de la transferencia de demanda es un factor trascendente en las soluciones obtenidas tanto en valores de demanda transferida total como en las decisiones respecto a la ciclovía resultante. Más allá de incrementos en el presupuesto, podemos obtener mayor transferencia y mejores decisiones respecto a la red de ciclovías utilizando mayor cantidad de puntos de quiebre. Esto es esperable dado que la representación de las funciones de transferencia como funciones escalonadas se hace de manera pesimista, de manera que la representación de la función no pueda obtener un valor funcional mayor a la función original. Sumado a esto, dado que una mayor precisión en la representación permite menor diferencia entre la representación y la función real, entonces es esperable obtener mayores números de demanda transferida al aumentar la cantidad de puntos de quiebre. Asimismo, mayor cantidad de puntos de quiebre permite evaluar de mejor manera el valor objetivo para distintas soluciones. Por ejemplo, la solución óptima de la instancia 13, que utiliza 50 puntos de quiebre, puede no ser solución óptima para la instancia 11, que utiliza 5 puntos de quiebre, y es efectivamente lo que sucede. Para esta última, el valor objetivo de su solución óptima es mejor que el valor objetivo evaluado sobre las decisiones de la solución óptima dada por la instancia 13.

\FloatBarrier
\section{Aplicación a un caso real}

Utilizamos una instancia de la ciudad de Montevideo de manera de poder analizar la aplicación práctica del problema sobre datos familiares y realistas. Los datos de la instancia provienen de una red sobre una zonificación de la ciudad que resulta en un grafo de 136 nodos y 636 arcos. Los arcos están ponderados por su largo en metros, valor que también utilizamos como costo de usuario sobre la red de calles (tecnología 0). Respecto a la demanda, consideramos los 600 pares origen-destino de mayor demanda que cumplen que el origen y destino no se encuentran a más de 3 km de distancia euclídea entre ellos. Encontramos que una distancia 3 km en línea recta, que implica una distancia Manhattan máxima de poco más de 4,2 km, es un límite razonable para viajes en bicicleta común y eléctricas según \textcite{anette2018}, donde se estima una distancia de viaje promedio de 2,6 km y 3 km respectivamente. Además, está dentro de lo que \textcite{shwe2014} considera un viaje potencial en bicicleta, es decir, menor a 5 km.

\subsection{Descripción de la instancia}

La ciudad de Montevideo es la de mayor tamaño en el Uruguay. Incluyendo el área metropolitana cuenta con una población de cerca de 1,8 millones de personas y una densidad de población de 6726 habitantes por $km^2$. La ciudad cuenta con un sistema de transporte de autobuses que, junto al transporte privado automotor, abarcan la mayor parte de la demanda de viajes: 25,2\% y 32\% respectivamente \parencite{Mauttone2017a}.

La instancia utilizada corresponde a una simplificación de la red de calles de la ciudad, observar la comparación en la Figura \ref{fig:montevideosimplification}. La red simplificada fue desarrollada en el proyecto ``Diseño óptimo de redes de ciclovías'' financiado por la Comisión Sectorial de Investigación Científica de la Universidad de la República, y consiste en una zonificación de la ciudad donde los nodos representan los centroides de cada zona y los arcos modelan la adyacencia entre ellas. Por otro lado, la matriz de demanda se tomó de \textcite{Massobrio2020}, en donde se realiza un estudio y relevamiento de la demanda de viajes de la ciudad a partir de datos de uso del sistema de transporte metropolitano \footnote{\url{https://montevideo.gub.uy/areas-tematicas/sistema-de-transporte-metropolitano}} de la ciudad en el año 2015. Si bien los datos de demanda son específicos de transporte público consideramos que es una buena aproximación a la matriz de demanda que interesa a nuestro problema, es decir los viajes que no se realizan en bicicleta. Si asumimos que la demanda no contemplada por estos datos, esto es, la que utiliza el transporte privado, sigue una distribución similar entonces no habría diferencia en los resultados que obtenemos, ya que nuestro modelo considera aspectos topológicos de la red y los valores relativos de demanda entre pares origen-destino.

\begin{figure}[h!]
  \centering
  \includegraphics[width=.49\linewidth]{../resources/montevideo_full.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_simple.png}
  \caption{Compartiva de la red de calles de Montevideo y la red utilizando la zonificación con 136 nodos y 636 arcos.}
  \label{fig:montevideosimplification}
\end{figure}

Actualmente, la red de ciclovías en Montevideo abarca más de 48 km correspondiente a cerca de 1,27\% del largo total de la red de calles, ver Figura \ref{fig:montevideobikeways}. Se espera que esta red siga creciendo como parte de las políticas de incentivo del uso de la bicicleta que comprende, en el último relevamiento disponible, 2,6\% del total de viajes diarios que se realizan \parencite{Mauttone2017a}.

\begin{figure}[h!]
  \centering
  \includegraphics[width=10cm]{../resources/bicicircuitos_montevideo.png}
  \caption{Situación actual de la red de ciclovías en la ciudad de Montevideo. En color rojo se representa el tipo de tecnología más básico que consiste en un límite de velocidad de 30 km/h para los vehiculos motorizados. En naranja, la tecnología de nivel intermedio que refiere a una senda específica para bicicletas dentro de la superficie de la calle. Por último, en azul, la tecnología superior correspondiente a una senda pavimentada exclusivamente construida para la bicicleta.}
  \label{fig:montevideobikeways}
\end{figure}

\subsection{Resultados}

Dado el tamaño de la instancia y los recursos computacionales disponibles decidimos utilizar 4 tipos de tecnología, incluyendo la base, y 10 puntos de quiebre. Probamos las funciones de transferencia de demanda logística y lineal y tres factores de presupuesto: 40\%, 80\% y 160\%. Las instancias fueron resueltas por el solver CPLEX versión 20.1.0.0, en un CPU Xeon Gold 6138 utilizando hasta 16 hilos y hasta 180 GB de memoria, en el Centro Nacional de Supercomputación (ClusterUY)\footnote{\url{https://www.cluster.uy/}}. CPLEX fue configurado para utilizar descomposición de Benders de manera automática\footnote{\url{https://www.ibm.com/docs/en/icos/20.1.0?topic=algorithm-benders-strategy-parameter}}, lo que mejoró el desempeño del solver aplicado a este problema. Vale la pena mencionar que realizamos pruebas utilizando más tipos de tecnología y mayor cantidad de pares origen-destino pero nos encontramos con limitaciones en los recursos disponibles en términos de memoria o límite de tiempo de ejecución de 5 días.

El resumen de las ejecuciones se encuentra en la Tabla \ref{table:montevideoexecutions} y la asignación de presupuesto a cada tipo de tecnología de ciclovía en la Tabla \ref{table:montevideobudgetusage}. La ciclovía construida por cada instancia se encuentra representada en la Figura \ref{fig:montevideo_instances_infras}. Observamos que los resultados son buenos en términos de demanda transferida para los casos con menor presupuesto en comparación con las instancias de Sioux-Falls, dado que aquí se obtiene más de un 50\% de demanda transferida total frente a un 5\% en Sioux-Falls. Podemos explicar esto porque la distribución de la proporción más significativa de la demanda en la red de Montevideo, como se puede ver en la Figura \ref{fig:montevideodemanddist}, se ubica en la misma región de la red. Por lo tanto, concentrar la inversión en esa zona produce resultados de amplio impacto.

\begin{table}[h!]
  \centering
  \begin{adjustbox}{width=1.2\textwidth,center=\textwidth}
    \begin{tabular}{cScSScc}
      \toprule
        Instancia & \shortstack{Factor de \\ presupuesto (\%)} & \shortstack{Función de \\ transferencia} & \shortstack{\# Pares OD con \\ demanda transferida} & \shortstack{Demanda \\ transferida (\%)} & \shortstack{Tiempo de \\ ejecución \\ (hh:mm:ss)} \\
      \midrule
        1 & 40 & lineal & 395 & 53,92 & 02:59:57 \\
        2 & 40 & logística & 373 & 54,42 & 28:59:56 \\
        3 & 80 & lineal & 513 & 74,76 & 00:32:13 \\
        4 & 80 & logística & 510 & 75,76 & 00:37:32 \\
        5 & 160 & lineal & 598 & 94,70 & 00:14:26 \\
        6 & 160 & logística & 597 & 95,60 & 00:12:06 \\
      \bottomrule
    \end{tabular}
  \end{adjustbox}
  \caption{Resumen de ejecuciones sobre las instancias resueltas para la red de Montevideo.}\label{table:montevideoexecutions}
\end{table}

\begin{table}[h!]
  \centering
  \begin{adjustbox}{width=1.2\textwidth,center=\textwidth}
    \begin{tabular}{cSSSSSSSS}
      \toprule
        \multirow{2}{*}{{Instancia}} &
        \multicolumn{2}{c}{{Tecnología 1}} &
        \multicolumn{2}{c}{{Tecnología 2}} &
        \multicolumn{2}{c}{{Tecnología 3}} &
        \multicolumn{2}{c}{{Total}} \\
        & {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} &
          {Largo} & {Presupuesto} \\
      \midrule
        1 & 0,59 & 1,47 & 6,93  & 34,72 & 6,37  & 63,81 & 13,89 & 100 \\
        2 & 0,35 & 0,89 & 6,83  & 34,43 & 6,41  & 64,68 & 13,59 & 100 \\
        3 & 0,34 & 0,43 & 11,89 & 29,77 & 13,93 & 69,80 & 26,16 & 100 \\
        4 & 1,10 & 1,37 & 12,47 & 31,21 & 13,47 & 67,42 & 27,04 & 100 \\
        5 & 1,05 & 0,65 & 9,61  & 12,02 & 34,92 & 87,33 & 45,58 & 100 \\
        6 & 1,39 & 0,87 & 12,76 & 15,95 & 33,27 & 83,18 & 47,42 & 100 \\
      \bottomrule
    \end{tabular}
  \end{adjustbox}
  \caption{Porcentaje del presupuesto utilizado y porcentaje del largo total de la red de calles desagregado por tipo de tecnología para cada instancia.}\label{table:montevideobudgetusage}
\end{table}

\begin{figure}[h!]
  \centering
  \includegraphics[width=\linewidth]{../resources/montevideo_demands.png}
    \caption{Representación de los 600 pares origen-destino considerados para Montevideo por ubicación de origen y destino. A la izquierda se ubican los orígenes y a la derecha los destinos. Los tamaños de los círculos son proporcionales al valor de demanda de cada par origen-destino.}
  \label{fig:montevideodemanddist}
\end{figure}

\FloatBarrier
Si comparamos las funciones de transferencia de demanda fijando el factor de presupuesto vemos que no hay diferencias significativas en términos de demanda transferida total y cantidad de pares origen-destino afectados, aunque la función logística obtuvo levemente mejores resultados en lo primero y la lineal en lo segundo. No pudimos detectar diferencias claras en las decisiones respecto a los tipos de tecnologías construidas ni el presupuesto asignado a cada una, ver Tabla \ref{table:montevideobudgetusage}.

Calculamos el desvío de los ciclistas en la distancia de los caminos de menor costo de usuario respecto a la distancia del camino más corto en distancia por par origen-destino. Recordamos que en \textcite{winters2010} el 75\% de los viajes en bicicleta se desvían a lo sumo un 10\% del camino de menor distancia y un 90\% se desvían hasta un 25\%. En nuestras instancias el desvío es menor y observamos que las instancias con función lineal tienen menor desvío, a mismo presupuesto, que las que utilizan la función logística. A su vez, a mayor presupuesto menor es el desvío como muestra el achatamiento de las curvas hacia las instancias con mayor presupuesto asignado, ver Figura \ref{fig:montevideoshortestpathdeviation}.

\begin{figure}[h!]
  \centering
  \includegraphics[width=\linewidth]{../resources/montevideo_shortest_path_distance_deviation.png}
    \caption{Porcentaje de desvío sobre el camino más corto en distancia para cada instancia. El cálculo se hizo ordenando los pares origen-destino con demanda transferida por el factor de desvío. En el eje de las abscisas consideramos únicamente la demanda de cada par que se transfiere a la bicicleta. Por lo tanto es una medida similar a \textcite{winters2010}. Nótese que para calcular el desvío del camino elegido por un par origen-destino se tomó un camino cualquiera de menor costo de usuario y luego se calculó su distancia, pudiendo existir otro camino con mismo costo de usuario y menor distancia.}
  \label{fig:montevideoshortestpathdeviation}
\end{figure}

\begin{figure}[h!]
  \centering
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_linear_0.4_budget_factor.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_inv_logit_0.4_budget_factor.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_linear_0.8_budget_factor.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_inv_logit_0.8_budget_factor.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_linear_1.6_budget_factor.png}
  \includegraphics[width=.49\linewidth]{../resources/montevideo_d3000.0_inv_logit_1.6_budget_factor.png}
  \caption{Infraestructura de ciclovía construida para cada instancia. A la izquierda se ubican aquellas con función de transferencia de demanda lineal, a la derecha las que utilizan función logística. Además, están dispuestas en orden creciente de factor de presupuesto desde arriba.}
  \label{fig:montevideo_instances_infras}
\end{figure}

Como análisis final comparamos la demanda transferida según nuestro modelo contra los datos de la encuesta de movilidadad \textcite{Mauttone2017a} de la cual resulta que el 2,6\% de un total de 4.201.184 viajes diarios se realiza en bicicleta. En nuestro conjunto de datos de viajes tomados de \textcite{Massobrio2020} tenemos un total de 6.568.837 viajes mensuales que se reducen a 2.652.707 si consideramos únicamente los pares origen-destino que distan a menos de 3 km en línea recta y 1.794.911 si de estos últimos tomamos los 600 con mayor demanda. Para la comparativa, ejecutamos una instancia con los mismos 600 pares origen-destino que en las instancias anteriores, función de transferencia lineal con 10 puntos de quiebre y un factor de presupuesto de 10\% que equivale al doble del presupuesto actual de la ciudad según los porcentajes de largo sobre la red de calles de cada tipo de tecnología de ciclovía en Montevideo, ver Tabla \ref{table:cicloviasmontevideo}, asumiendo que las ciclovías actuales van en ambas direcciones. Luego, con la salida de esta instancia en términos de infraestructura de ciclovía, Figura \ref{fig:montevideolowbudgetinstance}, calculamos los valores de demanda transferida total para el conjunto completo de demanda asumiendo que las decisiones sobre infraestructura de ciclovía están fijas según la instancia resuelta. Como resultado, ver Tabla \ref{table:montevideobikeusageresults}, vemos que los valores de demanda transferida o utilización de la bicicleta estimados son bastante mayores a los de la encuesta de movilidad en términos porcentuales. Podemos decir que esto es esperable por varias razones. En primer lugar, estamos considerando un presupuesto que puede cubrir con ciclovías una mayor proporción de la red de calles y esto afecta directamente, en nuestro modelo, la demanda transferida. Luego, estamos asumiendo que toda la demanda es potencial usuaria de la bicicleta, bajo la hipótesis de que construyendo ciclovías la gente va a elegir la bicicleta como medio de transporte, situación que no es esperable que suceda en todos los casos, aún construyendo las mejores ciclovías en todas direcciones \parencite{shwe2014}. Y finalmente, la proporción de viajes en bicicleta de la encuesta de movilidad puede estar subestimada dado el tamaño de la muestra (2230 hogares) y el bajo porcentaje de viajes en bicicleta.

\begin{table}[h!]
  \centering
  \begin{tabular}{ccSS}
    \toprule
      Tipo de tecnología & Nombre tecnología & {Porcentaje} & {\shortstack{Porcentaje sobre \\ red de calles}} \\
    \midrule
        1   & Zona 30    & 18,92  & 0,40   \\
        2   & Bicisenda  & 49,90  & 0,63   \\
        3   & Ciclovía   & 31,19  & 0,24   \\
    \midrule
            & \textbf{Total}  & 100,00 & 1,27   \\
    \bottomrule
  \end{tabular}
  \caption{Porcentaje de cada tipo de tecnología de ciclovía utilizado en Montevideo actualmente en relación al largo total de la red de calles.}
  \label{table:cicloviasmontevideo}
\end{table}

\begin{table}[h!]
  \centering
  \begin{tabular}{cccc}
    \toprule
      Demanda considerada & \shortstack{Cantidad \\ de pares OD} & \shortstack{Cantidad \\ de viajes} & \shortstack{Utilización de \\ la bicicleta} (\%) \\
    \midrule
      Pares OD $\leq$ 3 km top 600 & 600   & 1.794.911 & 439.048 (24\%)  \\
      Pares OD $\leq$ 3 km         & 1703  & 2.652.707 & 489.171 (18\%)  \\
      Toda                         & 6184  & 6.568.837 & 962.946 (14\%)  \\
    \midrule
      Encuesta Movilidad           & -     & 4.201.184 & 109.231 (2,6\%) \\
    \bottomrule
  \end{tabular}
  \caption{Comparativa de los resultados de utilización de la bicicleta.}
  \label{table:montevideobikeusageresults}
\end{table}

\begin{figure}[h!]
  \centering
  \includegraphics[width=12cm]{../resources/montevideo_d3000.0_linear_0.1_budget_factor.png}
    \caption{Tecnología de ciclovías construidas para la instancia que considera 600 pares origen destino, función de transferencia de demanda lineal y un factor de presupuesto de 10\%. La instancia fue resuelta a un MIP GAP\protect\footnotemark de 2,15\% luego de un tiempo límite de ejecución de 5 días.}
  \label{fig:montevideolowbudgetinstance}
\end{figure}

\footnotetext{En el algoritmo Branch and Bound, utilizado para resolver problemas MILP o MIP, el MIP GAP refiere a la distancia relativa entre la mejor solución entera y la mejor cota, encontradas hasta cierto punto de la ejecución.}

\FloatBarrier
En esta sección hemos aplicado nuestro modelo a la instancia de Montevideo obteniendo varias conclusiones. En primer lugar, observamos que la concentración de la red de ciclovías resultante sigue, a grandes rasgos, la misma distribución topológica de la demanda. Si deseamos obtener resultados más equitativos en términos de población afectada, podemos pensar en usar funciones de transferencia de demanda que induzcan un buen número de demanda transferida con bajos niveles de mejora y disminuyan la demanda transferida marginal por cada nivel de mejora adicional, por ejemplo la de concavidad negativa de la Sección \ref{sect:fspecification}, página \pageref{sect:fspecification}. Esto permitiría que el modelo busque mejorar otras zonas de la red en lugar de seguir mejorando los caminos de mayor demanda que según las funciones de transferencia que utilizamos son los de mayor retorno en términos del objetivo del problema. Otra forma de abordar esta situación es mantener el modelado de la transferencia de demanda y adicionar restricciones que permitan lograr mayor equidad.

Por otro lado, las funciones transferencia lineal y logística se comportaron de manera similar en las estadísticas calculadas a excepción del desvío sobre el largo del camino de menor distancia e indicios de que una mayor cantidad de pares origen-destino son afectados a favor de la función lineal. Sin embargo, para obtener conclusiones más firmes al respecto deberíamos ejecutar las instancias con mayor cantidad de puntos de quiebre, que como se mencionó en la sección de análisis de sensibilidad \ref{sect:sensibilityanalysis}, puede inducir decisiones más inteligentes.

Finalmente, observamos que nos encontramos en el límite del tamaño manejable de nuestro problema dado que incrementos en términos de tecnologías consideradas o cantidad de puntos de quiebre superan los recursos computacionales disponibles.
