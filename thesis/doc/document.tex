\documentclass{article}
  \parindent = 0mm % Sin sangría
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
  \usepackage[spanish]{babel}
  \usepackage{graphicx}
  \usepackage{amstext}
  \usepackage{amsmath}
  \usepackage{booktabs}
  \usepackage{subfigure}
  \usepackage{footnote}
  \usepackage{hyperref}
  \usepackage{algpseudocode,algorithm,algorithmicx}
  \usepackage[font=small,labelfont=bf]{caption}
  \usepackage{esvect}

\begin{document}
  \begin{center}
    {\sc \large Maestría en Investigación de Operaciones}
    
    {\sc \large Tesis - Tentativo}
    \linebreak

    {\rm Joaquín Correa - \today}
  \end{center}

  \section*{Problema}

  \subsection*{Descripción}

  El problema se ubica dentro del contexto de diseño y planificación de ciclovías en una ciudad.

  Dada una red que modela una ciudad y una matriz de demanda, el objetivo es maximizar la cantidad de demanda que utiliza la bicicleta como medio de transporte. Para poder lograr esto, se cuenta con infraestructuras y presupuesto, que de ser utilizados, permiten disminuir el costo percibido por el usuario al utilizar la bicicleta, asumiendo que utiliza el camino más corto, y por lo tanto potencialmente influir la decision de utilizarla como medio de transporte.

  \subsection*{Formulación}

  El problema se formula como un problema binivel, donde el primer nivel representa la comuna (o entidad que toma decisiones sobre las ciclovías) y maximiza la cantidad de usuarios que utilizan la bicicleta por medio de la decisión de la ubicación y tipo de ciclovías para cada arco de la red. El segundo nivel representa a los usuarios y resuelve el problema del costo del camino más corto para cada par de nodos origen-destino.

  \subsection*{Formulación matemática}

  \begin{align}
    \text{max}    & \sum_{k \in OD} f_k(w_k)                                      & \label{eq:objective1lvl} \\
    \text{s.t.}\; & w_k = \sum_{e \in E} \sum_{k \in OD} \sum_{i \in I} C_{ei}y_{ei}x_{ek} & \forall k \in OD \label{eq:shortestpath} \\
                  & w_k \geq 0, y_{ei} \in \left\{ 0, 1 \right\}      & \nonumber \\
                  & B \geq \sum_{e \in E} \sum_{i \in I} M_{ek}y_{ei} & \label{eq:respectbudget} \\
                  & 1 \geq \sum_{i \in I} y_{ei}                      & \forall e \in E \label{eq:atmostoney} \\
                  & y_{ei} \in \left\{0, 1\right\} & \nonumber \\
                  & \text{min} \sum_{e \in E} \sum_{k \in OD} \sum_{i \in I} C_{ei}y_{ei}x_{ek} & \label{eq:subproblem} \\
                  & \text{s.t.} \sum_{e \in E_n^+} x_{ek} - \sum_{e \in E_n^-} x_{ek} = \theta_{nk}  & \forall k \in OD \label {eq:flowbalance} \\
                  & \hspace{1.5em} x_{ek} \geq 0  & \nonumber
  \end{align}

  Donde:

  \begin{description}
    \item[$OD$]: Es el conjunto de pares origen destino.
    \item[$f_k$]: Función que determina la demanda que utiliza la bicicleta como medio en función del costo del camino mas corto.
    \item[$C_{ei}$] Cost de usuario de atravesar el arco $e$ utilizando la infraestructura $i$.
    \item[$M_{ei}$]: Cost de construcción de la infraestructura $i$ en el arco $e$.
    \item[$B$]: Presupuesto para la construcción de infraestructuras.
    \item[$\theta_{nk}$]: Parámetro que vale $1$ si n es el origen del par od $k$, -$1$ si es el destino y $0$ en otro caso.
    \item[$w_k$]: Variable de primer nivel que contiene el valor del camino más corto para el par origen destino $k$.
    \item[$y_{ei}$]: Variable binaria de primer nivel que determina si la infraestructura $i$ está activa en el arco $e$.
    \item[$x_{ek}$]: Variable de segundo nivel que determina si el arco $e$ es parte del camino más corto para el par origen-destino $k$.
    \item[$G=(N,E)$]: Es el grafo que modela la red, con sus nodos $N$ y arcos $E$. $E_n^+$ y $E_n^-$ son los conjuntos de arcos que salen y entran respectivamente, desde el nodo $n$.
  \end{description}

  Y las ecuaciones:

  \begin{description}
    \item[\ref{eq:objective1lvl}]: La función objetivo es la suma de los valores de demandas que cambiaron de medio.
    \item[\ref{eq:shortestpath}]: Restricción que determina el costo del camino más corto dado en el primer nivel.
    \item[\ref{eq:respectbudget}]: Restricción de presupuesto sobre lo que se puede construir.
    \item[\ref{eq:atmostoney}]: Restricción que permite a lo sumo una infraestructura estar activa en cada arco.
    \item[\ref{eq:subproblem}]: Función objetivo del segundo nivel.
    \item[\ref{eq:flowbalance}]: Restricción de balance de flujo.
  \end{description}

  \subsubsection*{Observaciones}

  La linealidad de la formulación propuesta es determinada por las funciónes $f_k$. En las ecuaciones (\ref{eq:shortestpath}) y (\ref{eq:subproblem}) las variables de primer y segundo nivel se multiplican pero dado que las variables de un nivel son parámetro en el otro nivel no se pierde la linealidad de dichas ecuaciónes.

\end{document}
